#include <stdio.h>
#include <stdlib.h>

// Functions to get and set pixel values
int getPixel(int *img, int w, int x, int y) {
    return img[y * w + x]; // row-major order
}

void setPixel(int *img, int w, int x, int y, int val) {
    img[y * w + x] = val;
}

int main() {
    int w, h;
    printf("Enter width and height of image: ");
    scanf("%d %d", &w, &h);

    // Allocate memory for grayscale image
    int *image = (int*)malloc(w * h * sizeof(int));

    // Input pixel values
    printf("Enter pixel values (%d total):\n", w * h);
    for (int y = 0; y < h; y++) {
        for (int x = 0; x < w; x++) {
            scanf("%d", &image[y * w + x]);
        }
    }

    // Example: change one pixel using set()
    setPixel(image, w, 1, 1, 255);  // set pixel at (1,1) to 255

    // Print image using get()
    printf("\nGrayscale image:\n");
    for (int y = 0; y < h; y++) {
        for (int x = 0; x < w; x++) {
            printf("%3d ", getPixel(image, w, x, y));
        }
        printf("\n");
    }

    // Free allocated memory
    free(image);
    return 0;
}
