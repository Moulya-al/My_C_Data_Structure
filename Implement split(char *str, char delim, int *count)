#include <stdio.h>
#include <stdlib.h>
#include <string.h>

// Function to split a string by a delimiter
char** split(char *str, char delim, int *count) {
    char **result = NULL; // to store words
    *count = 0;
    char *token, *temp;

    // make a copy of the string because strtok changes it
    temp = strdup(str);

    token = strtok(temp, &delim);
    while (token != NULL) {
        // increase space for new token
        result = (char**)realloc(result, (*count + 1) * sizeof(char*));
        result[*count] = strdup(token); // copy token into new memory
        (*count)++;

        token = strtok(NULL, &delim);
    }

    free(temp); // free temporary copy
    return result;
}

int main() {
    char str[100];
    char delim;
    int count = 0;

    printf("Enter a string: ");
    scanf("%[^\n]", str);

    printf("Enter a delimiter character: ");
    scanf(" %c", &delim);

    char **words = split(str, delim, &count);

    printf("\nSplit words:\n");
    for (int i = 0; i < count; i++) {
        printf("%s\n", words[i]);
        free(words[i]); // free each word
    }

    free(words); // free array of pointers
    return 0;
}
